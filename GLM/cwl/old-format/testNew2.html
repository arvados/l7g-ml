<!doctype html><html><head>
        <title>workflow.json#main stats</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dygraph/2.0.0/dygraph.min.js"></script>
        <script type="text/javascript">var chartdata = [{"charts": [{"data": [[12.0, 0.9099818003639927, 0.33199336013279734, 0.5779884402311954], [22.0, 0.162, 0.094, 0.068], [32.0, 0.34900000000000003, 0.21800000000000003, 0.131], [42.0, 1.0, 0.808, 0.192], [52.0, 0.9359999999999999, 0.45899999999999996, 0.477], [62.0, 0.959, 0.74, 0.219], [72.0, 1.001, 0.748, 0.253], [82.0, 0.999, 0.756, 0.24300000000000002], [92.0, 1.001, 1.0, 0.001], [102.0, 1.0, 1.0, 0.0], [112.0, 1.0, 1.0, 0.0], [122.0, 1.0, 1.0, 0.0], [132.0, 1.0, 1.0, 0.0], [142.0, 1.0, 1.0, 0.0], [152.0, 1.0, 1.0, 0.0], [162.0, 1.0, 1.0, 0.0], [172.0, 1.0, 1.0, 0.0], [182.0, 1.001, 1.0, 0.001], [192.0, 1.0, 1.0, 0.0], [202.0, 1.0, 1.0, 0.0], [212.0, 1.0, 0.993, 0.007000000000000001], [222.0, 1.0, 0.79, 0.21000000000000002], [232.0, 1.0, 0.761, 0.23900000000000002], [242.0, 1.0, 0.7030000000000001, 0.29700000000000004], [252.0, 1.001, 0.9369999999999999, 0.064], [262.0, 1.0, 1.0, 0.0], [272.0, 1.0, 1.0, 0.0], [282.0, 1.0, 1.0, 0.0], [292.0, 1.0, 1.0, 0.0], [302.0, 1.0, 1.0, 0.0], [312.0, 1.0, 1.0, 0.0], [322.0, 1.0, 1.0, 0.0], [332.0, 1.0, 1.0, 0.0], [342.0, 1.0, 1.0, 0.0], [352.0, 1.0, 1.0, 0.0], [362.0, 0.999, 0.982, 0.017], [372.0, 1.0, 0.7809999999999999, 0.219], [382.0, 1.001, 0.735, 0.266], [392.0, 1.0, 0.7150000000000001, 0.28500000000000003], [402.0, 1.0010100101001012, 0.8970089700897009, 0.1040010400104001], [412.0, 1.0, 1.0, 0.0], [422.0, 1.0, 1.0, 0.0], [432.0, 1.0, 1.0, 0.0], [442.0, 1.0, 1.0, 0.0], [452.0, 1.0, 1.0, 0.0], [462.0, 1.0, 1.0, 0.0], [472.0, 1.0, 1.0, 0.0], [482.0, 1.0, 1.0, 0.0], [492.0, 1.0, 1.0, 0.0], [502.0, 1.0, 1.0, 0.0], [512.0, 1.0, 1.0, 0.0], [522.0, 1.0, 1.0, 0.0], [532.0, 0.999, 0.9339999999999999, 0.065], [542.0, 1.0, 0.732, 0.268], [552.0, 1.001, 0.776, 0.225], [562.0, 0.999, 0.679, 0.32], [572.0, 1.0, 1.0, 0.0], [582.0, 1.0, 1.0, 0.0], [592.0, 1.0, 1.0, 0.0], [602.0, 1.0, 1.0, 0.0], [612.0, 1.0, 1.0, 0.0], [622.0, 1.0, 1.0, 0.0], [632.0, 1.0, 1.0, 0.0], [642.0, 1.0, 1.0, 0.0], [652.0, 1.0, 1.0, 0.0], [662.0, 1.0, 1.0, 0.0], [672.0, 1.0, 1.0, 0.0], [682.0, 1.0, 1.0, 0.0], [692.0, 1.0, 1.0, 0.0], [702.0, 1.0, 1.0, 0.0], [712.0, 1.0, 1.0, 0.0], [722.0, 1.0, 1.0, 0.0], [732.0, 1.0, 0.93, 0.06999999999999999], [742.0, 1.0, 0.649, 0.351], [752.0, 1.000989990100099, 0.7949920500794992, 0.20599794002059982], [762.0, 1.0, 0.748, 0.252], [772.0, 1.0, 1.0, 0.0], [782.0, 1.0, 1.0, 0.0], [792.0, 1.0, 1.0, 0.0], [802.0, 1.0, 1.0, 0.0], [812.0, 1.0, 1.0, 0.0], [822.0, 0.999990000099999, 0.999990000099999, 0.0], [832.0, 1.0, 1.0, 0.0], [842.0, 1.001, 1.0, 0.001], [852.0, 1.0, 1.0, 0.0], [862.0, 1.0, 1.0, 0.0], [872.0, 1.0, 1.0, 0.0], [882.0, 1.0, 0.994, 0.006], [892.0, 0.999, 0.819, 0.18], [902.0, 1.0, 0.724, 0.27599999999999997], [912.0, 1.001, 0.741, 0.26], [922.0, 1.0, 0.8460000000000001, 0.154], [932.0, 1.0, 1.0, 0.0], [942.0, 1.0, 1.0, 0.0], [952.0, 1.0, 1.0, 0.0], [962.0, 1.0, 1.0, 0.0], [972.0, 1.0, 1.0, 0.0], [982.0, 1.0, 1.0, 0.0], [992.0, 1.0, 1.0, 0.0], [1002.0, 1.0, 1.0, 0.0], [1012.0, 1.0, 1.0, 0.0]], "options": {"labels": ["elapsed", "user+sys__rate", "user__rate", "sys__rate"], "connectSeparatedPoints": true, "legend": "always", "title": "workflow.json#main (partial): cpu"}}, {"data": [[2.0, 4624384], [12.0, 2500210688], [22.0, 2956963840], [32.0, 4744736768], [42.0, 12784549888], [52.0, 18790195200], [62.0, 21908439040], [72.0, 37059067904], [82.0, 34422902784], [92.0, 34422902784], [102.0, 34422902784], [112.0, 34422902784], [122.0, 34422902784], [132.0, 34422902784], [142.0, 34422902784], [152.0, 34422902784], [162.0, 34422902784], [172.0, 34422902784], [182.0, 34422902784], [192.0, 34422902784], [202.0, 34422902784], [212.0, 34812469248], [222.0, 46961475584], [232.0, 43597324288], [242.0, 54587985920], [252.0, 58487472128], [262.0, 58487472128], [272.0, 58487472128], [282.0, 58487472128], [292.0, 58487472128], [302.0, 58487472128], [312.0, 58487472128], [322.0, 58487472128], [332.0, 58487472128], [342.0, 58487472128], [352.0, 58487472128], [362.0, 31632556032], [372.0, 44168491008], [382.0, 35587276800], [392.0, 52444790784], [402.0, 58562113536], [412.0, 58562113536], [422.0, 58562113536], [432.0, 58562113536], [442.0, 58562113536], [452.0, 58562113536], [462.0, 58562113536], [472.0, 58562113536], [482.0, 58562113536], [492.0, 58562113536], [502.0, 58562113536], [512.0, 58562113536], [522.0, 58562113536], [532.0, 62592167936], [542.0, 32978993152], [552.0, 46406750208], [562.0, 65441230848], [572.0, 65441230848], [582.0, 65441230848], [592.0, 65441230848], [602.0, 65441230848], [612.0, 65441230848], [622.0, 65441230848], [632.0, 65441230848], [642.0, 65441230848], [652.0, 65441230848], [662.0, 65441230848], [672.0, 65441230848], [682.0, 65441230848], [692.0, 65441230848], [702.0, 65441230848], [712.0, 65441230848], [722.0, 65441230848], [732.0, 69386121216], [742.0, 55397228544], [752.0, 67669872640], [762.0, 58542112768], [772.0, 58542112768], [782.0, 58542112768], [792.0, 58542112768], [802.0, 58542112768], [812.0, 58542112768], [822.0, 58542112768], [832.0, 58542112768], [842.0, 58542112768], [852.0, 58542112768], [862.0, 58542112768], [872.0, 58542112768], [882.0, 58870837248], [892.0, 69408481280], [902.0, 34026213376], [912.0, 49669853184], [922.0, 58664333312], [932.0, 58664333312], [942.0, 58664333312], [952.0, 58664333312], [962.0, 58664333312], [972.0, 58664333312], [982.0, 58664333312], [992.0, 58664333312], [1002.0, 58664333312], [1012.0, 58664333312]], "options": {"labels": ["elapsed", "rss"], "connectSeparatedPoints": true, "legend": "always", "title": "workflow.json#main (partial): mem"}}, {"data": [[22.0, 7.0, 7.0, 0.0], [32.0, 0.0, 0.0, 0.0], [42.0, 7.0, 7.0, 0.0], [52.0, 0.0, 0.0, 0.0], [62.0, 0.0, 0.0, 0.0], [72.0, 7.0, 7.0, 0.0], [82.0, 0.0, 0.0, 0.0], [92.0, 0.0, 0.0, 0.0], [102.0, 0.0, 0.0, 0.0], [112.0, 0.0, 0.0, 0.0], [122.0, 0.0, 0.0, 0.0], [132.0, 0.0, 0.0, 0.0], [142.0, 7.0, 7.0, 0.0], [152.0, 0.0, 0.0, 0.0], [162.0, 0.0, 0.0, 0.0], [172.0, 0.0, 0.0, 0.0], [182.0, 0.0, 0.0, 0.0], [192.0, 0.0, 0.0, 0.0], [202.0, 0.0, 0.0, 0.0], [212.0, 0.0, 0.0, 0.0], [222.0, 0.0, 0.0, 0.0], [232.0, 0.0, 0.0, 0.0], [242.0, 0.0, 0.0, 0.0], [252.0, 0.0, 0.0, 0.0], [262.0, 0.0, 0.0, 0.0], [272.0, 0.0, 0.0, 0.0], [282.0, 7.0, 7.0, 0.0], [292.0, 0.0, 0.0, 0.0], [302.0, 0.0, 0.0, 0.0], [312.0, 0.0, 0.0, 0.0], [322.0, 0.0, 0.0, 0.0], [332.0, 0.0, 0.0, 0.0], [342.0, 0.0, 0.0, 0.0], [352.0, 0.0, 0.0, 0.0], [362.0, 0.0, 0.0, 0.0], [372.0, 0.0, 0.0, 0.0], [382.0, 0.0, 0.0, 0.0], [392.0, 0.0, 0.0, 0.0], [402.0, 0.0, 0.0, 0.0], [412.0, 0.0, 0.0, 0.0], [422.0, 0.0, 0.0, 0.0], [432.0, 0.0, 0.0, 0.0], [442.0, 0.0, 0.0, 0.0], [452.0, 0.0, 0.0, 0.0], [462.0, 0.0, 0.0, 0.0], [472.0, 0.0, 0.0, 0.0], [482.0, 0.0, 0.0, 0.0], [492.0, 0.0, 0.0, 0.0], [502.0, 0.0, 0.0, 0.0], [512.0, 0.0, 0.0, 0.0], [522.0, 0.0, 0.0, 0.0], [532.0, 0.0, 0.0, 0.0], [542.0, 7.0, 7.0, 0.0], [552.0, 0.0, 0.0, 0.0], [562.0, 0.0, 0.0, 0.0], [572.0, 0.0, 0.0, 0.0], [582.0, 0.0, 0.0, 0.0], [592.0, 0.0, 0.0, 0.0], [602.0, 0.0, 0.0, 0.0], [612.0, 0.0, 0.0, 0.0], [622.0, 0.0, 0.0, 0.0], [632.0, 0.0, 0.0, 0.0], [642.0, 0.0, 0.0, 0.0], [652.0, 0.0, 0.0, 0.0], [662.0, 0.0, 0.0, 0.0], [672.0, 0.0, 0.0, 0.0], [682.0, 0.0, 0.0, 0.0], [692.0, 0.0, 0.0, 0.0], [702.0, 0.0, 0.0, 0.0], [712.0, 0.0, 0.0, 0.0], [722.0, 0.0, 0.0, 0.0], [732.0, 0.0, 0.0, 0.0], [742.0, 0.0, 0.0, 0.0], [752.0, 0.0, 0.0, 0.0], [762.0, 0.0, 0.0, 0.0], [772.0, 0.0, 0.0, 0.0], [782.0, 0.0, 0.0, 0.0], [792.0, 0.0, 0.0, 0.0], [802.0, 0.0, 0.0, 0.0], [812.0, 0.0, 0.0, 0.0], [822.0, 0.0, 0.0, 0.0], [832.0, 0.0, 0.0, 0.0], [842.0, 0.0, 0.0, 0.0], [852.0, 0.0, 0.0, 0.0], [862.0, 0.0, 0.0, 0.0], [872.0, 0.0, 0.0, 0.0], [882.0, 0.0, 0.0, 0.0], [892.0, 0.0, 0.0, 0.0], [902.0, 0.0, 0.0, 0.0], [912.0, 0.0, 0.0, 0.0], [922.0, 0.0, 0.0, 0.0], [932.0, 0.0, 0.0, 0.0], [942.0, 0.0, 0.0, 0.0], [952.0, 0.0, 0.0, 0.0], [962.0, 0.0, 0.0, 0.0], [972.0, 0.0, 0.0, 0.0], [982.0, 0.0, 0.0, 0.0], [992.0, 0.0, 0.0, 0.0], [1002.0, 0.0, 0.0, 0.0], [1012.0, 0.0, 0.0, 0.0]], "options": {"labels": ["elapsed", "tx+rx__rate", "rx__rate", "tx__rate"], "connectSeparatedPoints": true, "legend": "always", "title": "workflow.json#main (partial): net:eth0"}}, {"data": [[0.0, 0.0, 0.0, 0.0], [10.0, 17542724.4, 17542724.4, 0.0], [20.0, 52392043.6, 52392043.6, 0.0], [30.0, 52392043.6, 52392043.6, 0.0], [40.0, 0.0, 0.0, 0.0], [50.0, 0.0, 0.0, 0.0], [60.0, 3653923.2, 3653923.2, 0.0], [70.0, 0.0, 0.0, 0.0], [80.0, 0.0, 0.0, 0.0], [90.0, 0.0, 0.0, 0.0], [100.0, 0.0, 0.0, 0.0], [110.0, 0.0, 0.0, 0.0], [120.0, 0.0, 0.0, 0.0], [130.0, 0.0, 0.0, 0.0], [140.0, 0.0, 0.0, 0.0], [150.0, 0.0, 0.0, 0.0], [160.0, 0.0, 0.0, 0.0], [170.0, 0.0, 0.0, 0.0], [180.0, 0.0, 0.0, 0.0], [190.0, 0.0, 0.0, 0.0], [200.0, 0.0, 0.0, 0.0], [210.0, 0.0, 0.0, 0.0], [221.0, 0.0, 0.0, 0.0], [231.0, 0.0, 0.0, 0.0], [241.0, 0.0, 0.0, 0.0], [251.0, 0.0, 0.0, 0.0], [261.0, 0.0, 0.0, 0.0], [271.0, 0.0, 0.0, 0.0], [281.0, 0.0, 0.0, 0.0], [291.0, 0.0, 0.0, 0.0], [301.0, 0.0, 0.0, 0.0], [311.0, 0.0, 0.0, 0.0], [321.0, 0.0, 0.0, 0.0], [331.0, 0.0, 0.0, 0.0], [341.0, 0.0, 0.0, 0.0], [351.0, 0.0, 0.0, 0.0], [361.0, 0.0, 0.0, 0.0], [371.0, 0.0, 0.0, 0.0], [381.0, 0.0, 0.0, 0.0], [391.0, 0.0, 0.0, 0.0], [401.0, 0.0, 0.0, 0.0], [411.0, 0.0, 0.0, 0.0], [421.0, 0.0, 0.0, 0.0], [431.0, 0.0, 0.0, 0.0], [441.0, 0.0, 0.0, 0.0], [451.0, 0.0, 0.0, 0.0], [461.0, 0.0, 0.0, 0.0], [471.0, 0.0, 0.0, 0.0], [481.0, 0.0, 0.0, 0.0], [491.0, 0.0, 0.0, 0.0], [501.0, 0.0, 0.0, 0.0], [511.0, 0.0, 0.0, 0.0], [521.0, 0.0, 0.0, 0.0], [531.0, 0.0, 0.0, 0.0], [541.0, 0.0, 0.0, 0.0], [551.0, 0.0, 0.0, 0.0], [561.0, 0.0, 0.0, 0.0], [571.0, 0.0, 0.0, 0.0], [581.0, 0.0, 0.0, 0.0], [591.0, 0.0, 0.0, 0.0], [601.0, 0.0, 0.0, 0.0], [611.0, 0.0, 0.0, 0.0], [621.0, 0.0, 0.0, 0.0], [631.0, 0.0, 0.0, 0.0], [641.0, 0.0, 0.0, 0.0], [651.0, 0.0, 0.0, 0.0], [661.0, 0.0, 0.0, 0.0], [671.0, 0.0, 0.0, 0.0], [681.0, 0.0, 0.0, 0.0], [691.0, 0.0, 0.0, 0.0], [701.0, 0.0, 0.0, 0.0], [711.0, 0.0, 0.0, 0.0], [721.0, 0.0, 0.0, 0.0], [732.0, 0.0, 0.0, 0.0], [742.0, 0.0, 0.0, 0.0], [752.0, 0.0, 0.0, 0.0], [762.0, 0.0, 0.0, 0.0], [772.0, 0.0, 0.0, 0.0], [782.0, 0.0, 0.0, 0.0], [792.0, 0.0, 0.0, 0.0], [802.0, 0.0, 0.0, 0.0], [812.0, 0.0, 0.0, 0.0], [822.0, 0.0, 0.0, 0.0], [832.0, 0.0, 0.0, 0.0], [842.0, 0.0, 0.0, 0.0], [852.0, 0.0, 0.0, 0.0], [862.0, 0.0, 0.0, 0.0], [872.0, 0.0, 0.0, 0.0], [882.0, 0.0, 0.0, 0.0], [892.0, 0.0, 0.0, 0.0], [902.0, 0.0, 0.0, 0.0], [912.0, 0.0, 0.0, 0.0], [922.0, 0.0, 0.0, 0.0], [932.0, 0.0, 0.0, 0.0], [942.0, 0.0, 0.0, 0.0], [952.0, 0.0, 0.0, 0.0], [962.0, 0.0, 0.0, 0.0], [972.0, 0.0, 0.0, 0.0], [982.0, 0.0, 0.0, 0.0], [992.0, 0.0, 0.0, 0.0], [1002.0, 0.0, 0.0, 0.0], [1012.0, 0.0, 0.0, 0.0]], "options": {"labels": ["elapsed", "tx+rx__rate", "rx__rate", "tx__rate"], "connectSeparatedPoints": true, "legend": "always", "title": "workflow.json#main (partial): net:keep0"}}, {"data": [[2.0, 3252908032, 8255877120], [12.0, 3252965376, 8255877120], [22.0, 3252965376, 8255877120], [32.0, 3252965376, 8255877120], [42.0, 3252973568, 8255877120], [52.0, 3252973568, 8255877120], [62.0, 3252973568, 8255877120], [72.0, 3252973568, 8255877120], [82.0, 3252973568, 8255877120], [92.0, 3252973568, 8255877120], [102.0, 3252973568, 8255877120], [112.0, 3252973568, 8255877120], [122.0, 3252973568, 8255877120], [132.0, 3252973568, 8255877120], [142.0, 3252973568, 8255877120], [152.0, 3252977664, 8255877120], [162.0, 3252977664, 8255877120], [172.0, 3252977664, 8255877120], [182.0, 3252977664, 8255877120], [192.0, 3252977664, 8255877120], [202.0, 3252977664, 8255877120], [212.0, 3252977664, 8255877120], [222.0, 3252977664, 8255877120], [232.0, 3252977664, 8255877120], [242.0, 3252977664, 8255877120], [252.0, 3252977664, 8255877120], [262.0, 3252981760, 8255877120], [272.0, 3252981760, 8255877120], [282.0, 3252981760, 8255877120], [292.0, 3252981760, 8255877120], [302.0, 3252981760, 8255877120], [312.0, 3252981760, 8255877120], [322.0, 3252981760, 8255877120], [332.0, 3252981760, 8255877120], [342.0, 3252981760, 8255877120], [352.0, 3252981760, 8255877120], [362.0, 3252981760, 8255877120], [372.0, 3252985856, 8255877120], [382.0, 3252985856, 8255877120], [392.0, 3252985856, 8255877120], [402.0, 3252985856, 8255877120], [412.0, 3252985856, 8255877120], [422.0, 3252985856, 8255877120], [432.0, 3252985856, 8255877120], [442.0, 3252985856, 8255877120], [452.0, 3252985856, 8255877120], [462.0, 3252985856, 8255877120], [472.0, 3252985856, 8255877120], [482.0, 3252989952, 8255877120], [492.0, 3252989952, 8255877120], [502.0, 3252989952, 8255877120], [512.0, 3252989952, 8255877120], [522.0, 3252989952, 8255877120], [532.0, 3252989952, 8255877120], [542.0, 3252989952, 8255877120], [552.0, 3252989952, 8255877120], [562.0, 3252989952, 8255877120], [572.0, 3252989952, 8255877120], [582.0, 3252989952, 8255877120], [592.0, 3252994048, 8255877120], [602.0, 3252994048, 8255877120], [612.0, 3252994048, 8255877120], [622.0, 3252994048, 8255877120], [632.0, 3252994048, 8255877120], [642.0, 3252994048, 8255877120], [652.0, 3252994048, 8255877120], [662.0, 3252994048, 8255877120], [672.0, 3252994048, 8255877120], [682.0, 3252994048, 8255877120], [692.0, 3252998144, 8255877120], [702.0, 3253002240, 8255877120], [712.0, 3253002240, 8255877120], [722.0, 3253002240, 8255877120], [732.0, 3253002240, 8255877120], [742.0, 3253002240, 8255877120], [752.0, 3253002240, 8255877120], [762.0, 3253002240, 8255877120], [772.0, 3253002240, 8255877120], [782.0, 3253002240, 8255877120], [792.0, 3253002240, 8255877120], [802.0, 3253002240, 8255877120], [812.0, 3253006336, 8255877120], [822.0, 3253006336, 8255877120], [832.0, 3253006336, 8255877120], [842.0, 3253006336, 8255877120], [852.0, 3253006336, 8255877120], [862.0, 3253006336, 8255877120], [872.0, 3253006336, 8255877120], [882.0, 3253006336, 8255877120], [892.0, 3253006336, 8255877120], [902.0, 3253006336, 8255877120], [912.0, 3253006336, 8255877120], [922.0, 3253010432, 8255877120], [932.0, 3253010432, 8255877120], [942.0, 3253010432, 8255877120], [952.0, 3253010432, 8255877120], [962.0, 3253010432, 8255877120], [972.0, 3253010432, 8255877120], [982.0, 3253010432, 8255877120], [992.0, 3253010432, 8255877120], [1002.0, 3253010432, 8255877120], [1012.0, 3253010432, 8255877120]], "options": {"labels": ["elapsed", "used", "total"], "connectSeparatedPoints": true, "legend": "always", "title": "workflow.json#main (partial): statfs"}}], "label": "workflow.json#main (partial) (2xpu4-xvhdp-717e0atts1xtbas) -- elapsed time 16m52s"}];
// Copyright (c) 2009 Dan Vanderkam. All rights reserved.
//
// SPDX-License-Identifier: MIT

/**
 * Synchronize zooming and/or selections between a set of dygraphs.
 *
 * Usage:
 *
 *   var g1 = new Dygraph(...),
 *       g2 = new Dygraph(...),
 *       ...;
 *   var sync = Dygraph.synchronize(g1, g2, ...);
 *   // charts are now synchronized
 *   sync.detach();
 *   // charts are no longer synchronized
 *
 * You can set options using the last parameter, for example:
 *
 *   var sync = Dygraph.synchronize(g1, g2, g3, {
 *      selection: true,
 *      zoom: true
 *   });
 *
 * The default is to synchronize both of these.
 *
 * Instead of passing one Dygraph object as each parameter, you may also pass an
 * array of dygraphs:
 *
 *   var sync = Dygraph.synchronize([g1, g2, g3], {
 *      selection: false,
 *      zoom: true
 *   });
 *
 * You may also set `range: false` if you wish to only sync the x-axis.
 * The `range` option has no effect unless `zoom` is true (the default).
 *
 * Original source: https://github.com/danvk/dygraphs/blob/master/src/extras/synchronizer.js
 * at commit b55a71d768d2f8de62877c32b3aec9e9975ac389
 *
 * Copyright (c) 2009 Dan Vanderkam
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */
(function() {
/* global Dygraph:false */
'use strict';

var Dygraph;
if (window.Dygraph) {
  Dygraph = window.Dygraph;
} else if (typeof(module) !== 'undefined') {
  Dygraph = require('../dygraph');
}

var synchronize = function(/* dygraphs..., opts */) {
  if (arguments.length === 0) {
    throw 'Invalid invocation of Dygraph.synchronize(). Need >= 1 argument.';
  }

  var OPTIONS = ['selection', 'zoom', 'range'];
  var opts = {
    selection: true,
    zoom: true,
    range: true
  };
  var dygraphs = [];
  var prevCallbacks = [];

  var parseOpts = function(obj) {
    if (!(obj instanceof Object)) {
      throw 'Last argument must be either Dygraph or Object.';
    } else {
      for (var i = 0; i < OPTIONS.length; i++) {
        var optName = OPTIONS[i];
        if (obj.hasOwnProperty(optName)) opts[optName] = obj[optName];
      }
    }
  };

  if (arguments[0] instanceof Dygraph) {
    // Arguments are Dygraph objects.
    for (var i = 0; i < arguments.length; i++) {
      if (arguments[i] instanceof Dygraph) {
        dygraphs.push(arguments[i]);
      } else {
        break;
      }
    }
    if (i < arguments.length - 1) {
      throw 'Invalid invocation of Dygraph.synchronize(). ' +
            'All but the last argument must be Dygraph objects.';
    } else if (i == arguments.length - 1) {
      parseOpts(arguments[arguments.length - 1]);
    }
  } else if (arguments[0].length) {
    // Invoked w/ list of dygraphs, options
    for (var i = 0; i < arguments[0].length; i++) {
      dygraphs.push(arguments[0][i]);
    }
    if (arguments.length == 2) {
      parseOpts(arguments[1]);
    } else if (arguments.length > 2) {
      throw 'Invalid invocation of Dygraph.synchronize(). ' +
            'Expected two arguments: array and optional options argument.';
    }  // otherwise arguments.length == 1, which is fine.
  } else {
    throw 'Invalid invocation of Dygraph.synchronize(). ' +
          'First parameter must be either Dygraph or list of Dygraphs.';
  }

  if (dygraphs.length < 2) {
    throw 'Invalid invocation of Dygraph.synchronize(). ' +
          'Need two or more dygraphs to synchronize.';
  }

  var readycount = dygraphs.length;
  for (var i = 0; i < dygraphs.length; i++) {
    var g = dygraphs[i];
    g.ready( function() {
      if (--readycount == 0) {
        // store original callbacks
        var callBackTypes = ['drawCallback', 'highlightCallback', 'unhighlightCallback'];
        for (var j = 0; j < dygraphs.length; j++) {
          if (!prevCallbacks[j]) {
            prevCallbacks[j] = {};
          }
          for (var k = callBackTypes.length - 1; k >= 0; k--) {
            prevCallbacks[j][callBackTypes[k]] = dygraphs[j].getFunctionOption(callBackTypes[k]);
          }
        }

        // Listen for draw, highlight, unhighlight callbacks.
        if (opts.zoom) {
          attachZoomHandlers(dygraphs, opts, prevCallbacks);
        }

        if (opts.selection) {
          attachSelectionHandlers(dygraphs, prevCallbacks);
        }
      }
    });
  }

  return {
    detach: function() {
      for (var i = 0; i < dygraphs.length; i++) {
        var g = dygraphs[i];
        if (opts.zoom) {
          g.updateOptions({drawCallback: prevCallbacks[i].drawCallback});
        }
        if (opts.selection) {
          g.updateOptions({
            highlightCallback: prevCallbacks[i].highlightCallback,
            unhighlightCallback: prevCallbacks[i].unhighlightCallback
          });
        }
      }
      // release references & make subsequent calls throw.
      dygraphs = null;
      opts = null;
      prevCallbacks = null;
    }
  };
};

function arraysAreEqual(a, b) {
  if (!Array.isArray(a) || !Array.isArray(b)) return false;
  var i = a.length;
  if (i !== b.length) return false;
  while (i--) {
    if (a[i] !== b[i]) return false;
  }
  return true;
}

function attachZoomHandlers(gs, syncOpts, prevCallbacks) {
  var block = false;
  for (var i = 0; i < gs.length; i++) {
    var g = gs[i];
    g.updateOptions({
      drawCallback: function(me, initial) {
        if (block || initial) return;
        block = true;
        var opts = {
          dateWindow: me.xAxisRange()
        };
        if (syncOpts.range) opts.valueRange = me.yAxisRange();

        for (var j = 0; j < gs.length; j++) {
          if (gs[j] == me) {
            if (prevCallbacks[j] && prevCallbacks[j].drawCallback) {
              prevCallbacks[j].drawCallback.apply(this, arguments);
            }
            continue;
          }

          // Only redraw if there are new options
          if (arraysAreEqual(opts.dateWindow, gs[j].getOption('dateWindow')) && 
              arraysAreEqual(opts.valueRange, gs[j].getOption('valueRange'))) {
            continue;
          }

          gs[j].updateOptions(opts);
        }
        block = false;
      }
    }, true /* no need to redraw */);
  }
}

function attachSelectionHandlers(gs, prevCallbacks) {
  var block = false;
  for (var i = 0; i < gs.length; i++) {
    var g = gs[i];

    g.updateOptions({
      highlightCallback: function(event, x, points, row, seriesName) {
        if (block) return;
        block = true;
        var me = this;
        for (var i = 0; i < gs.length; i++) {
          if (me == gs[i]) {
            if (prevCallbacks[i] && prevCallbacks[i].highlightCallback) {
              prevCallbacks[i].highlightCallback.apply(this, arguments);
            }
            continue;
          }
          var idx = gs[i].getRowForX(x);
          if (idx !== null) {
            gs[i].setSelection(idx, seriesName);
          }
        }
        block = false;
      },
      unhighlightCallback: function(event) {
        if (block) return;
        block = true;
        var me = this;
        for (var i = 0; i < gs.length; i++) {
          if (me == gs[i]) {
            if (prevCallbacks[i] && prevCallbacks[i].unhighlightCallback) {
              prevCallbacks[i].unhighlightCallback.apply(this, arguments);
            }
            continue;
          }
          gs[i].clearSelection();
        }
        block = false;
      }
    }, true /* no need to redraw */);
  }
}

Dygraph.synchronize = synchronize;

})();

// Copyright (C) The Arvados Authors. All rights reserved.
//
// SPDX-License-Identifier: AGPL-3.0

window.onload = function() {
    var charts = {};
    var fmt = {
        iso: function(y) {
            var s='';
            if (y > 1000000000) { y=y/1000000000; s='G'; }
            else if (y > 1000000) { y=y/1000000; s='M'; }
            else if (y > 1000) { y=y/1000; s='K'; }
            return y.toFixed(2).replace(/\.0+$/, '')+s;
        },
        time: function(s) {
            var ret = ''
            if (s >= 86400) ret += Math.floor(s/86400) + 'd'
            if (s >= 3600) ret += Math.floor(s/3600)%24 + 'h'
            if (s >= 60) ret += Math.floor(s/60)%60 + 'm'
            ret += Math.floor(s)%60 + 's'
            // finally, strip trailing zeroes: 1d0m0s -> 1d
            return ret.replace(/(\D)(0\D)*$/, '$1')
        },
    }
    var ticker = {
        time: function(min, max, pixels, opts, dg) {
            var max_ticks = Math.floor(pixels / opts('pixelsPerLabel'))
            var natural = [1, 5, 10, 30, 60,
                           120, 300, 600, 1800, 3600,
                           7200, 14400, 43200, 86400]
            var interval = natural.shift()
            while (max>min && (max-min)/interval > max_ticks) {
                interval = natural.shift() || (interval * 2)
            }
            var ticks = []
            for (var i=Math.ceil(min/interval)*interval; i<=max; i+=interval) {
                ticks.push({v: i, label: fmt.time(i)})
            }
            return ticks
        },
    }
    chartdata.forEach(function(section, section_idx) {
        var h1 = document.createElement('h1');
        h1.appendChild(document.createTextNode(section.label));
        document.body.appendChild(h1);
        section.charts.forEach(function(chart, chart_idx) {
            // Skip chart if every series has zero data points
            if (0 == chart.data.reduce(function(len, series) {
                return len + series.length;
            }, 0)) {
                return;
            }
            var id = 'chart-'+section_idx+'-'+chart_idx;
            var div = document.createElement('div');
            div.setAttribute('id', id);
            div.setAttribute('style', 'width: 100%; height: 150px');
            document.body.appendChild(div);
            chart.options.valueFormatter = function(y) {
            }
            chart.options.axes = {
                x: {
                    axisLabelFormatter: fmt.time,
                    valueFormatter: fmt.time,
                    ticker: ticker.time,
                },
                y: {
                    axisLabelFormatter: fmt.iso,
                    valueFormatter: fmt.iso,
                },
            }
            charts[id] = new Dygraph(div, chart.data, chart.options);
        });
    });

    var sync = Dygraph.synchronize(Object.values(charts), {range: false});

    if (typeof window.debug === 'undefined')
        window.debug = {};
    window.debug.charts = charts;
};
</script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/dygraph/2.0.0/dygraph.min.css">

        </head><body></body></html>
        